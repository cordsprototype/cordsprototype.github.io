<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cords</title>
  <link rel="shortcut icon" href="data:,">
  <style>
* {
  box-sizing: border-box;
  font-family: sans-serif;
}
body {
  background: linen;
}
svg {
  width: 20rem;
  max-width: calc(100vw - 1rem);
  max-height: calc(100vh - 1rem);
}
circle {
  cursor: pointer;
  transition: stroke-width 0.1s ease;
  stroke-width: 0;
}
@media (hover: hover) and (pointer: fine) {
  circle:hover {
    stroke-width: 9;
  }
}
form {
  display: flex;
  flex-wrap: wrap;
}
fieldset {
  display: flex;
  flex-direction: column;
}
input {
  appearance: none;
  border: none;
  background: none;
  border-bottom: 1px solid black;
  margin-bottom: 0.5rem;
}
  </style>
</head>
<body>
  <form>
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 237 137">
      <rect x="0.5" y="0.5" width="236" height="136" rx="4" fill="white" stroke="black" stroke-width="1"/>
      
      <rect x="6" y="28" width="92" height="19" rx="4" stroke="none" fill="#ccc"/>
      <rect x="6" y="49" width="92" height="19" rx="4" stroke="none" fill="#ccc"/>
      <rect x="6" y="70" width="92" height="19" rx="4" stroke="none" fill="#ccc"/>
      <rect x="6" y="91" width="92" height="19" rx="4" stroke="none" fill="#ccc"/>
      <rect x="6" y="112" width="92" height="19" rx="4" stroke="none" fill="#ccc"/>
      
      <rect x="138" y="28" width="92" height="19" rx="4" stroke="none" fill="#ccc"/>
      <rect x="138" y="49" width="92" height="19" rx="4" stroke="none" fill="#ccc"/>
      <rect x="138" y="70" width="92" height="19" rx="4" stroke="none" fill="#ccc"/>
      <rect x="138" y="91" width="92" height="19" rx="4" stroke="none" fill="#ccc"/>
      <rect x="138" y="112" width="92" height="19" rx="4" stroke="none" fill="#ccc"/>
      
      <rect x="6" y="7" width="92" height="19" opacity="0"/>
      <rect x="10" y="28" width="68" height="19" opacity="0"/>
      <rect x="10" y="49" width="68" height="19" opacity="0"/>
      <rect x="10" y="70" width="68" height="19" opacity="0"/>
      <rect x="10" y="91" width="68" height="19" opacity="0"/>
      <rect x="10" y="112" width="68" height="19" opacity="0"/>
      <rect x="138" y="7" width="92" height="19" opacity="0"/>
      <rect x="158" y="28" width="68" height="19" opacity="0"/>
      <rect x="158" y="49" width="68" height="19" opacity="0"/>
      <rect x="158" y="70" width="68" height="19" opacity="0"/>
      <rect x="158" y="91" width="68" height="19" opacity="0"/>
      <rect x="158" y="112" width="68" height="19" opacity="0"/>

      <text x="52" y="16.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      <text x="44" y="37.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      <text x="44" y="58.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      <text x="44" y="79.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      <text x="44" y="100.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      <text x="44" y="121.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      <text x="184" y="16.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      <text x="192" y="37.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      <text x="192" y="58.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      <text x="192" y="79.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      <text x="192" y="100.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      <text x="192" y="121.5" font-size="16" fill="black" stroke="none" text-anchor="middle" dominant-baseline="central"></text>
      
      <g stroke="black" stroke-linecap="round" stroke-width="4" fill="none"/>
      <g paint-order="stroke" stroke-opacity="0.25">
        <circle cx="88" cy="37.5" r="8" fill="red" stroke="red"/>
        <circle cx="88" cy="58.5" r="8" fill="orange" stroke="orange"/>
        <circle cx="88" cy="79.5" r="8" fill="yellow" stroke="yellow"/>
        <circle cx="88" cy="100.5" r="8" fill="lime" stroke="lime"/>
        <circle cx="88" cy="121.5" r="8" fill="blue" stroke="blue"/>
        <circle cx="148" cy="37.5" r="8" fill="red" stroke="red"/>
        <circle cx="148" cy="58.5" r="8" fill="orange" stroke="orange"/>
        <circle cx="148" cy="79.5" r="8" fill="yellow" stroke="yellow"/>
        <circle cx="148" cy="100.5" r="8" fill="lime" stroke="lime"/>
        <circle cx="148" cy="121.5" r="8" fill="blue" stroke="blue"/>
      </g>
    </svg>
    <fieldset>
      <legend>Clues</legend>
      <input>
      <input>
      <input>
      <input>
      <input>
      <button type="submit">Submit</button>
    </fieldset>
  </form>
  <script>
const cards = {
  "Countries": ["India","Canada","Brazil","Australia","Russia"],
  "Countries II": ["China","USA","Argentina","Algeria","Kazakhstan"],
  "Fruit": ["Banana","Pineapple","Avocado","Blueberry","Apple"],
  "Fruit II": ["Mango","Watermelon","Strawberry","Lemon","Orange"],
  "Vegetables": ["Tomato","Onion","Carrot","Lettuce","Corn"],
  "Vegetables II": ["Potato","Broccoli","Pepper","Cucumber","Mushroom"],
  "Animals": ["Bear","Shark","Snake","Pig","Lion"],
  "Animals II": ["Deer","Dolphin","Monkey","Spider","Wolf"],
  "Pets": ["Dog","Cat","Horse","Bird","Fish"],
  "Metals": ["Gold","Silver","Bronze","Iron","Tin"],
  "Gems": ["Diamond","Ruby","Pearl","Jade","Sapphire"],
  "Jewelry": ["Necklace","Watch","Glasses","Ring","Earring"],
  "Clothing": ["Shoes","Pants","Shirt","Underwear","Hat"],
  "Occupations": ["Banker","Doctor","Policeman","Teacher","Engineer"],
  "Occupations II": ["Scientist","Pilot","Lawyer","Technician","Dentist"],
  "Weather": ["Sun","Wind","Rain","Snow","Lightning"],
  "Instruments": ["Guitar","Drums","Violin","Piano","Trumpet"],
  "Sports": ["Rugby","Golf","Soccer","Cricket","Tennis"],
  "Sports II": ["Volleyball","Hockey","Basketball","Baseball ","Badminton"],
  "Olympics": ["Athletics","Swimming","Cycling","Weightlifting","Karate"],
  "Board Games": ["Chess","Monopoly","Clue","Ludo","Catan"],
  "Movie Genres": ["Comedy","Romance","Action","Drama","Horror"],
  "Music Genres": ["HipHop","Rock","Pop","Electronic","Blues"],
  "Languages": ["English","French","Chinese","Spanish","Hindi"],
  "Actors II": ["Gene Kelly","Tom Hanks","Will Smith","Jackie Chan","Clint Eastwood"],
  "Actresses": ["Angelina Jolie","Meryl Streep","Lucy Liu","Mindy Kaling","Emma Watson"],
  "Movies": ["Star Wars","The Godfather","Lord of the Rings","Toy Story","Forest Gump"],
  "Books": ["Harry Potter","The Bible","To Kill a Mockingbird","1984","Hamlet"],
  "Authors": ["Stephanie Myer","Jules Verne","Shakespeare","Agatha Christie","Dan Brown"],
  "Landmarks": ["Eiffel Tower","Colosseum","Taj Mahal","Pyramids","Great Wall"],
  "Landmarks II": ["Grand Canyon","Stonehenge","Louvre","Mt Kilimanjaro","Statue of Liberty"],
  "Desserts": ["Chocolate","Ice Cream","Donut","Jelly","Pudding"],
  "Colours": ["Red","Green","Blue","Pink","Black"],
  "Cartoons": ["Simpsons","Spongebob","Pokemon","Avatar","Garfield"],
  "Electronics": ["Computer","Phone","Satellite","Laser","Battery"],
  "Vehicles": ["Airplane","Boat","Car","Bike","Train"],
  "Meals": ["Pizza","Curry ","Sushi","Burger","Dumplings"],
  "Meals II": ["Pasta","Lobster","Kebab","Popcorn","Fajitas"],
  "Tools": ["Knife","Hammer","Torch","Ruler","Pliers"],
  "Inventions": ["Wheel","Calendar","Lightbulb","Compass","Concrete"],
  "Appliances": ["Toaster","Fridge","Microwave","Washing Machine","TV"],
  "Stationery": ["Paper","Pen","Eraser","Sharpener","Scissors"],
  "Emotions": ["Anger","Joy","Sadness","Fear","Surprise"],
  "Food": ["Milk","Egg","Bread","Ham","Cheese"],
  "Buildings": ["Hospital","University","Restaurant","Theatre","Supermarket"],
  "Collections": ["Books","Coins","Cards","Stamps","Wine"],
  "Organizations": ["Disney","Nestle","Amazon","Toyota","Microsoft"],
  "Body Parts": ["Brain","Heart","Skull","Ear","Finger"],
  "Body Parts II": ["Liver","Knee","Eye","Nose","Tongue"],
  "Mythical Beasts": ["Dragon","Centaur","Troll","Unicorn","Vampire"],
  "Mythical Beasts II": ["Werewolf","Leprechaun","Phoenix","Yeti","Mermaid"],
  "Cartoon Characters": ["Snoopy","Mickey Mouse","Hulk","Pink Panther","Batman"],
  "Materials": ["Plastic","Glass","Wool","Wood","Metal"],
};
const flatCards = Object.entries(cards).map(([k,v])=>[k, ...v]);
// w=50;h=70;c=3; ws=5;hs=5;m=2;
// wt=w+ws;ht=h+hs;hi=(ht-8*m)/6;
// document.body.innerHTML =
// `<svg xmlns="http://www.w3.org/2000/svg" viewBox="-.5 -.5 ${wt*c-ws+1} ${ht*Math.ceil(flatCards.length/3)-ws+1}" fill="none" stroke="black" stroke-width="1" stroke-linecap="round">${
//   flatCards.map((card,i)=>`
//   <rect x="${wt*(i%c)}" y="${ht*(i/c|0)}" width="${w}" height="${h+m/2}" rx="${m/2}" fill="white"/>
//   ${card.map((v, j) => `
//     <rect x="${wt*(i%c)+2*m}" y="${ht*(i/c|0)+(hi+m)*j}" width="${w-4*m}" height="${hi}" rx="${m/2}" stroke="none" fill="${['none','red','orange','yellow','lime','blue'][j]}"/>
//     <text x="${wt*(i%c)+w/2}" y="${ht*(i/c|0)+(hi+m)*j+hi-(j?m:m/2)}" font-size="${hi-m-m/2}" fill="black" stroke="none" text-anchor="middle" ${j ? '' : `font-weight="bold"`}>${v}</text>
//   `).join('')}
//   `).join('')
// }</svg>`;

function permutations(a) { return a.length ? a.reduce((r, v, i) => [...r, ...permutations([...a.slice(0, i), ...a.slice(i + 1)]).map(x => [v, ...x])], []) : [[]]; }

let cords = permutations(Array(5).fill(0).map((_, i) => i));
cords = cords.filter((p, i) => !cords.slice(0, i).some(a => a.every((b, k) => b == p.indexOf(k))));

let firstCard = flatCards[Math.random()*flatCards.length|0];
let secondCard = flatCards[Math.random()*flatCards.length|0];
while (firstCard[0] === secondCard[0]) {
  secondCard = flatCards[Math.random()*flatCards.length|0];
}
let cord = cords[Math.random()*flatCards.length|0];
if (Math.random() < 0.5) {
  cord.reverse();
}

const boxes = document.querySelectorAll('rect[opacity="0"]');
const texts = document.querySelectorAll('text');
texts.forEach((text, i) => {
  text.textContent = i < 6 ? firstCard[i] : secondCard[i - 6];
  const box = boxes[i];
  if (text.getBoundingClientRect().width > box.getBoundingClientRect().width) {
    text.setAttribute('font-size', text.getAttribute('font-size') * (box.getBoundingClientRect().width) / text.getBoundingClientRect().width);
  }
});


Array.prototype.spliceIndex = function(f, ...p) {
  const i = this.findIndex(f);
  if (i !== -1) {
    return this.splice(i, ...p);
  }
  this.push(...p.slice(1));
  return [];
};

const svg = document.querySelector('svg');
// const circles = [...svg.querySelectorAll('circle')];
// const paths = [];
const circles = [...document.querySelectorAll('circle')];
const paths = circles.slice(0, 5).map((start, i) => ({ start, end: circles[cord[i]+5] }));
drawPaths();

function drawPaths() {
  svg.querySelectorAll('path').forEach(p => p.parentNode.removeChild(p));
  paths.forEach(p => {
    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    path.setAttribute('d', `M${p.start.cx.baseVal.value},${p.start.cy.baseVal.value}L${p.active?.x ?? p.end.cx.baseVal.value},${p.active?.y ?? p.end.cy.baseVal.value}`);
    if (p.clash) {
      path.style.stroke = 'red';
    }
    svg.querySelector('g[stroke=black]').appendChild(path, svg.querySelector('g'));
  });
}

circles.forEach(circle => {
  let mousemove;
  let point = svg.createSVGPoint();
  circle.addEventListener('mousedown', e => {
    point.x = e.clientX;
    point.y = e.clientY;
    point = point.matrixTransform(svg.getScreenCTM().inverse());
    paths.filter(p => p.start === circle || p.end === circle).forEach(p => p.clash = true);
    paths.filter(p => p.clash).forEach(p => paths.spliceIndex(p => p.clash, 1));
    paths.spliceIndex(p => p.active, 1, { start: circle, active: point });
    drawPaths();
    circles.filter(c => c.cx.baseVal.value === circle.cx.baseVal.value).forEach(c => c.style.pointerEvents = 'none');
    mousemove = e => {
      point.x = e.clientX;
      point.y = e.clientY;
      point = point.matrixTransform(svg.getScreenCTM().inverse());
      paths.spliceIndex(p => p.active, 1, { start: circle, active: point });
      drawPaths();
    };
    svg.addEventListener('mousemove', mousemove);
    const mouseup = e => {
      const end = e.target.closest?.('circle');
      if (end && end.cx.baseVal.value !== circle.cx.baseVal.value) {
        paths.filter(p => p.start === end || p.end === end).forEach(p => p.clash = true);
        paths.filter(p => p.clash).forEach(p => paths.spliceIndex(p => p.clash, 1));
        paths.spliceIndex(p => p.active, 1, { start: circle, end });
      } else {
        paths.spliceIndex(p => p.active, 1);
      }
      drawPaths();
      circles.forEach(c => c.style.pointerEvents = '');
      svg.removeEventListener('mousemove', mousemove);
      document.removeEventListener('mouseup', mouseup);
      window.removeEventListener('mouseleave', mouseup);
    };
    document.addEventListener('mouseup', mouseup);
    window.addEventListener('mouseleave', mouseup);
  });
  circle.addEventListener('mouseenter', e => {
    paths.filter(p => p.start === circle || p.end === circle).forEach(p => p.clash = true);
    drawPaths();
  });
  circle.addEventListener('mouseleave', e => {
    paths.forEach(p => delete p.clash);
    drawPaths();
  });

  let touchmove;
  circle.addEventListener('touchstart', e => {
    point.x = e.touches[0].clientX;
    point.y = e.touches[0].clientY;
    point = point.matrixTransform(svg.getScreenCTM().inverse());
    paths.filter(p => p.start === circle || p.end === circle).forEach(p => p.clash = true);
    paths.filter(p => p.clash).forEach(p => paths.spliceIndex(p => p.clash, 1));
    paths.spliceIndex(p => p.active, 1, { start: circle, active: point });
    drawPaths();
    circles.filter(c => c.cx.baseVal.value === circle.cx.baseVal.value).forEach(c => c.style.pointerEvents = 'none');
    touchmove = e => {
      e.preventDefault();
      point.x = e.touches[0].clientX;
      point.y = e.touches[0].clientY;
      point = point.matrixTransform(svg.getScreenCTM().inverse());
      paths.spliceIndex(p => p.active, 1, { start: circle, active: point });
      drawPaths();
    };
    svg.addEventListener('touchmove', touchmove);
    const touchend = e => {
      const end = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY)?.closest('circle');
      if (end && end.cx.baseVal.value !== circle.cx.baseVal.value) {
        paths.filter(p => p.start === end || p.end === end).forEach(p => p.clash = true);
        paths.filter(p => p.clash).forEach(p => paths.spliceIndex(p => p.clash, 1));
        paths.spliceIndex(p => p.active, 1, { start: circle, end });
      } else {
        paths.spliceIndex(p => p.active, 1);
      }
      drawPaths();
      circles.forEach(c => c.style.pointerEvents = '');
      svg.removeEventListener('touchmove', touchmove);
      document.removeEventListener('touchend', touchend);
      window.removeEventListener('touchcancel', touchend);
    };
    document.addEventListener('touchend', touchend);
    window.addEventListener('touchcancel', touchend);
  });
});

document.addEventListener('touchmove', e => {
  e.preventDefault();
  paths.forEach(p => delete p.clash);
  const circle = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY)?.closest('circle');
  if (circle) {
    paths.filter(p => p.start === circle || p.end === circle).forEach(p => p.clash = true);
  }
  drawPaths();
});
  </script>
</body>
</html>
